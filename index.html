<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>üèÜ CRIC ELITE ¬∑ full player stats | both teams | 2 innings</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            background: #0a202b;
            background: radial-gradient(circle at 20% 30%, #1e5a6b, #0c2f3a);
            min-height: 100vh;
            padding: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .elite-container {
            max-width: 1500px;
            width: 100%;
            background: rgba(8, 48, 58, 0.98);
            backdrop-filter: blur(12px);
            border-radius: 50px;
            box-shadow: 0 35px 60px #000000cc, 0 0 0 4px #40b4b4, 0 0 40px #2bb3b3;
            padding: 22px;
            border: 2px solid #6fd9d9;
        }

        /* navigation */
        .nav-elite {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            background: #19616e;
            border-radius: 45px;
            padding: 12px 26px;
            margin-bottom: 25px;
            border-left: 6px solid #3cb371;
            border-right: 6px solid #3cb371;
        }

        .nav-links {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .nav-link {
            background: #2d8598;
            border: none;
            border-radius: 50px;
            padding: 12px 24px;
            font-size: 1.2rem;
            font-weight: 600;
            color: #f0fff0;
            box-shadow: 0 4px 0 #13525e;
            cursor: pointer;
            border: 1px solid #7fffd4;
        }
        .nav-link.active {
            background: #3cb371;
            box-shadow: 0 4px 0 #1e6b3e;
        }

        .timer-elite {
            background: #196e7a;
            border-radius: 50px;
            padding: 8px 22px;
            border: 2px solid #7fffd4;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .timer-elite span {
            font-size: 2.2rem;
            font-family: monospace;
            color: #d4ffd4;
        }

        /* pages */
        .page {
            display: none;
            animation: fade 0.3s;
        }
        .page.active-page {
            display: block;
        }
        @keyframes fade { from { opacity: 0.3; } to { opacity: 1; } }

        /* ===== SETUP PAGE ===== */
        .setup-page {
            background: #1a6a78f2;
            border-radius: 45px;
            padding: 35px 20px;
            border: 2px solid #6fc2c2;
            text-align: center;
        }
        .setup-page h1 {
            color: #f7f7ba;
            font-size: 2.8rem;
            margin-bottom: 25px;
        }
        .over-selector {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }
        .over-option {
            background: #268696;
            border-radius: 40px;
            padding: 20px 30px;
            border: 3px solid #7fffd4;
            cursor: pointer;
            min-width: 140px;
        }
        .over-option.selected {
            background: #3cb371;
            border-color: #f0e68c;
        }
        .over-option .big-number {
            font-size: 3.8rem;
            font-weight: 800;
            color: #fcfca4;
        }
        .team-setup {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
            justify-content: center;
            margin: 30px 0;
        }
        .team-setup input {
            background: #218b9b;
            border: 2px solid #7fffd4;
            border-radius: 60px;
            padding: 16px 30px;
            font-size: 1.6rem;
            color: #fcfcd4;
            width: 270px;
        }
        .launch-btn {
            background: #f0b73e;
            border: none;
            border-radius: 70px;
            padding: 20px 55px;
            font-size: 2.2rem;
            font-weight: 800;
            color: #08331f;
            box-shadow: 0 8px 0 #9f7629;
            cursor: pointer;
            margin-top: 20px;
        }

        /* ===== INNING PAGES ===== */
        .inning-page {
            background: #1a6a78f2;
            border-radius: 45px;
            padding: 24px;
            border: 2px solid #6fc2c2;
        }
        .head-bar {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            background: #1e7a88;
            border-radius: 40px;
            padding: 15px 25px;
            margin-bottom: 20px;
        }
        .team-name-big {
            font-size: 2.4rem;
            font-weight: 700;
            color: #fcfc9c;
        }
        .info-badge {
            background: #2f95a5;
            padding: 8px 25px;
            border-radius: 40px;
            font-size: 1.4rem;
            color: #fff9cf;
        }

        .mega-score {
            display: flex;
            align-items: baseline;
            gap: 15px;
            margin: 10px 0 20px;
            flex-wrap: wrap;
        }
        .runs-mega {
            font-size: 6rem;
            font-weight: 800;
            color: #f7e882;
        }
        .wickets-mega {
            font-size: 4rem;
            color: #ffacac;
        }
        .overs-mega {
            font-size: 3rem;
            background: #247380;
            padding: 5px 30px;
            border-radius: 60px;
            border: 2px solid #7fffd4;
            color: #e8ffbf;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            background: #1f8493;
            border-radius: 40px;
            padding: 22px;
            margin: 20px 0;
        }
        .stat-cell {
            text-align: center;
        }
        .stat-cell .label {
            color: #c2f5f5;
            font-size: 1rem;
        }
        .stat-cell .value {
            font-size: 2.2rem;
            font-weight: 700;
            color: #fbe586;
        }

        .batsman-duo {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }
        .batsman-card {
            background: #21808f;
            border-radius: 35px;
            padding: 20px;
            border: 2px solid #7fffd4;
        }
        .batsman-card input {
            background: #116673;
            border: 2px solid #9afff0;
            border-radius: 40px;
            padding: 12px;
            font-size: 1.4rem;
            color: #fcfcd4;
            width: 100%;
            margin-bottom: 10px;
        }
        .batsman-digits {
            display: flex;
            gap: 20px;
            font-size: 1.8rem;
            justify-content: center;
            color: #ffeca2;
        }

        .bowler-block {
            background: #1d808d;
            border-radius: 35px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid #7fffd4;
        }
        .run-bank {
            display: grid;
            grid-template-columns: repeat(5,1fr);
            gap: 10px;
            margin: 20px 0;
        }
        .run-bank button {
            background: #ecbc48;
            border: none;
            border-radius: 60px;
            font-size: 2.2rem;
            padding: 18px 0;
            box-shadow: 0 6px 0 #9f7629;
            cursor: pointer;
        }
        .wicket-red {
            background: #c9574b !important;
            box-shadow: 0 6px 0 #863730 !important;
        }

        .action-group {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin: 15px 0;
        }
        .action-group button {
            background: #2e7f8c;
            border: none;
            border-radius: 50px;
            padding: 15px 22px;
            font-size: 1.2rem;
            color: white;
            cursor: pointer;
            flex: 1;
        }

        /* ===== FINAL STATS PAGE ===== */
        .stats-final-page {
            background: #1a6a78f2;
            border-radius: 45px;
            padding: 28px;
            border: 2px solid #6fc2c2;
        }
        .stats-final-page h2 {
            color: #f7f7ba;
            font-size: 2.6rem;
            border-bottom: 4px solid #3cb371;
            margin-bottom: 25px;
        }

        .match-summary-card {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            background: #1d7a87;
            border-radius: 40px;
            padding: 25px;
            margin-bottom: 30px;
            justify-content: space-around;
        }
        .summary-piece {
            text-align: center;
        }
        .summary-piece .big-number {
            font-size: 3.2rem;
            font-weight: 800;
            color: #fbe586;
        }

        .both-teams-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .team-stats-box {
            background: #1d7685;
            border-radius: 35px;
            padding: 25px;
            border: 2px solid #7fffd4;
        }
        .team-stats-box h3 {
            color: #fcfc9c;
            font-size: 2rem;
            text-align: center;
            margin-bottom: 20px;
        }

        .section-subhead {
            color: #ffe28a;
            font-size: 1.5rem;
            margin: 20px 0 10px;
            border-bottom: 2px solid #3cb371;
        }

        .player-stat-line {
            display: flex;
            justify-content: space-between;
            padding: 10px 12px;
            border-bottom: 1px solid #4fa5a5;
            color: #e0f7f7;
            font-size: 1rem;
        }
        .player-stat-line span {
            font-weight: 600;
        }

        .result-big-banner {
            background: #3cb371;
            border-radius: 70px;
            padding: 28px;
            text-align: center;
            font-size: 2.5rem;
            font-weight: 800;
            color: #0a3520;
            margin: 30px 0;
        }

        .stats-actions {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .stats-actions button {
            background: #f0b73e;
            border: none;
            border-radius: 60px;
            padding: 16px 40px;
            font-size: 1.5rem;
            font-weight: 700;
            cursor: pointer;
        }

        @media (max-width: 700px) {
            .both-teams-stats { grid-template-columns: 1fr; }
            .runs-mega { font-size: 4rem; }
        }
    </style>
</head>
<body>
<div class="elite-container" id="eliteApp">
    <!-- navigation -->
    <div class="nav-elite">
        <div class="nav-links">
            <button class="nav-link" data-page="page1" id="navSetup">üìã SETUP</button>
            <button class="nav-link" data-page="page2" id="navInning1">‚ù∂ INNING 1</button>
            <button class="nav-link" data-page="page3" id="navInning2">‚ù∑ INNING 2</button>
            <button class="nav-link" data-page="page4" id="navStats">üìä FINAL STATS</button>
        </div>
        <div class="timer-elite">
            <span id="globalTimer">00:00</span>
            <button style="background:none; border:none; color:#7fffd4; font-size:1.6rem;" id="timerStart">‚ñ∂</button>
            <button style="background:none; border:none; color:#7fffd4; font-size:1.6rem;" id="timerPause">‚è∏Ô∏è</button>
        </div>
    </div>

    <!-- PAGE 1: SETUP -->
    <div id="page1" class="page active-page setup-page">
        <h1>üéØ SELECT OVERS & TEAMS</h1>
        <div class="over-selector" id="overSelector">
            <div class="over-option" data-overs="1"><div class="big-number">1</div><div>OVER</div></div>
            <div class="over-option" data-overs="3"><div class="big-number">3</div><div>OVERS</div></div>
            <div class="over-option" data-overs="4"><div class="big-number">4</div><div>OVERS</div></div>
            <div class="over-option" data-overs="5"><div class="big-number">5</div><div>OVERS</div></div>
            <div class="over-option selected" data-overs="20"><div class="big-number">20</div><div>OVERS</div></div>
        </div>
        <div class="team-setup">
            <input type="text" id="team1Input" value="ROYALS" placeholder="Team 1">
            <input type="text" id="team2Input" value="TITANS" placeholder="Team 2">
        </div>
        <button class="launch-btn" id="startMatchBtn">üèè START MATCH</button>
    </div>

    <!-- PAGE 2: INNING 1 -->
    <div id="page2" class="page inning-page">
        <div class="head-bar">
            <span class="team-name-big" id="i1TeamName">ROYALS</span>
            <span class="info-badge" id="i1OversInfo">20 overs</span>
        </div>
        <div class="mega-score">
            <span class="runs-mega" id="i1Runs">0</span>
            <span class="wickets-mega" id="i1Wickets">/0</span>
            <span class="overs-mega" id="i1Overs">0.0</span>
        </div>
        <div class="stat-grid">
            <div class="stat-cell"><span class="label">RUN RATE</span><span class="value" id="i1RunRate">0.00</span></div>
            <div class="stat-cell"><span class="label">PROJECTED</span><span class="value" id="i1Proj">0</span></div>
            <div class="stat-cell"><span class="label">PARTNERSHIP</span><span class="value" id="i1Part">0</span></div>
        </div>
        <div class="batsman-duo" id="i1Batsmen"></div>
        <div class="bowler-block">
            <div style="display:flex; justify-content:space-between; color:#bcf0f0;">
                <span>BOWLER</span>
                <span id="i1BowlerEcon">0.00</span>
            </div>
            <div style="display:flex; gap:15px; align-items:center;">
                <input type="text" id="i1BowlerName" value="BOULT">
                <span id="i1BowlerFig" style="font-size:2rem;">0-0-0-0</span>
            </div>
        </div>
        <div class="run-bank">
            <button class="run1" data-run="0">0</button>
            <button class="run1" data-run="1">1</button>
            <button class="run1" data-run="2">2</button>
            <button class="run1" data-run="3">3</button>
            <button class="run1" data-run="4">4</button>
            <button class="run1" data-run="5">5</button>
            <button class="run1" data-run="6">6</button>
            <button class="run1 wicket-red" data-run="W">W</button>
            <button class="run1" data-run="WD">WD</button>
            <button class="run1" data-run="NB">NB</button>
        </div>
        <div class="action-group">
            <button id="i1ChangeStrike">üîÑ CHANGE STRIKE</button>
            <button id="i1NextBowler">‚è© NEXT BOWLER</button>
            <button id="endInning1Btn">‚èπÔ∏è END INNING 1</button>
        </div>
    </div>

    <!-- PAGE 3: INNING 2 -->
    <div id="page3" class="page inning-page">
        <div class="head-bar">
            <span class="team-name-big" id="i2TeamName">TITANS</span>
            <span class="info-badge" id="targetDisplay">TARGET: 0</span>
        </div>
        <div class="mega-score">
            <span class="runs-mega" id="i2Runs">0</span>
            <span class="wickets-mega" id="i2Wickets">/0</span>
            <span class="overs-mega" id="i2Overs">0.0</span>
        </div>
        <div class="stat-grid">
            <div class="stat-cell"><span class="label">RUN RATE</span><span class="value" id="i2RunRate">0.00</span></div>
            <div class="stat-cell"><span class="label">REQ RATE</span><span class="value" id="i2ReqRate">0.00</span></div>
            <div class="stat-cell"><span class="label">PARTNERSHIP</span><span class="value" id="i2Part">0</span></div>
        </div>
        <div class="batsman-duo" id="i2Batsmen"></div>
        <div class="bowler-block">
            <div style="display:flex; justify-content:space-between;">
                <span>BOWLER</span>
                <span id="i2BowlerEcon">0.00</span>
            </div>
            <div style="display:flex; gap:15px;">
                <input type="text" id="i2BowlerName" value="SHAMI">
                <span id="i2BowlerFig" style="font-size:2rem;">0-0-0-0</span>
            </div>
        </div>
        <div class="run-bank">
            <button class="run2" data-run="0">0</button>
            <button class="run2" data-run="1">1</button>
            <button class="run2" data-run="2">2</button>
            <button class="run2" data-run="3">3</button>
            <button class="run2" data-run="4">4</button>
            <button class="run2" data-run="5">5</button>
            <button class="run2" data-run="6">6</button>
            <button class="run2 wicket-red" data-run="W">W</button>
            <button class="run2" data-run="WD">WD</button>
            <button class="run2" data-run="NB">NB</button>
        </div>
        <div class="action-group">
            <button id="i2ChangeStrike">üîÑ CHANGE STRIKE</button>
            <button id="i2NextBowler">‚è© NEXT BOWLER</button>
            <button id="endMatchBtn">üèÅ END MATCH & SHOW STATS</button>
        </div>
    </div>

    <!-- PAGE 4: FINAL STATS (with full player data) -->
    <div id="page4" class="page stats-final-page">
        <h2>üìä FULL TEAM & PLAYER STATS</h2>
        <div class="match-summary-card" id="matchSummary">
            <div class="summary-piece"><span class="label">TOTAL OVERS</span><span class="big-number" id="finalOvers">20</span></div>
            <div class="summary-piece"><span class="label">WINNER</span><span class="big-number" id="winnerText">‚Äî</span></div>
        </div>

        <div class="both-teams-stats">
            <!-- Team 1 Stats -->
            <div class="team-stats-box">
                <h3 id="team1NameFinal">ROYALS</h3>
                <div class="section-subhead">üèè BATTING</div>
                <div id="team1BattingStats"></div>
                <div class="section-subhead">üéØ BOWLING</div>
                <div id="team1BowlingStats"></div>
                <div class="section-subhead">üìã PARTNERSHIP</div>
                <div id="team1Partnership">0 runs</div>
            </div>

            <!-- Team 2 Stats -->
            <div class="team-stats-box">
                <h3 id="team2NameFinal">TITANS</h3>
                <div class="section-subhead">üèè BATTING</div>
                <div id="team2BattingStats"></div>
                <div class="section-subhead">üéØ BOWLING</div>
                <div id="team2BowlingStats"></div>
                <div class="section-subhead">üìã PARTNERSHIP</div>
                <div id="team2Partnership">0 runs</div>
            </div>
        </div>

        <div class="result-big-banner" id="resultMessage">MATCH IN PROGRESS</div>
        
        <div class="stats-actions">
            <button id="downloadStatsBtn">üì• DOWNLOAD FULL STATS</button>
            <button id="newMatchBtn">üîÑ NEW MATCH</button>
        </div>
    </div>
</div>

<script>
    (function() {
        // ---------- PROFESSIONAL STATE WITH FULL PLAYER STATS ----------
        let config = {
            totalOvers: 20,
            team1: "ROYALS",
            team2: "TITANS"
        };

        // INNING 1 - 10 players with complete stats
        let inning1 = {
            runs: 0, wickets: 0, overs: 0, balls: 0,
            batsmen: [
                { name: "SHARMA", runs: 0, balls: 0, striker: true, active: true },
                { name: "KOHLI", runs: 0, balls: 0, striker: false, active: true },
                { name: "RAHUL", runs: 0, balls: 0, active: false },
                { name: "PANDEY", runs: 0, balls: 0, active: false },
                { name: "JADEJA", runs: 0, balls: 0, active: false },
                { name: "BUMRAH", runs: 0, balls: 0, active: false },
                { name: "SHAMI", runs: 0, balls: 0, active: false },
                { name: "CHAHAL", runs: 0, balls: 0, active: false },
                { name: "SIRAJ", runs: 0, balls: 0, active: false },
                { name: "HARDIK", runs: 0, balls: 0, active: false }
            ],
            bowler: { name: "BOULT", overs: 0, balls: 0, runs: 0, wickets: 0 }
        };

        // INNING 2 - 10 players
        let inning2 = {
            runs: 0, wickets: 0, overs: 0, balls: 0,
            batsmen: [
                { name: "WARNER", runs: 0, balls: 0, striker: true, active: true },
                { name: "BAIRSTOW", runs: 0, balls: 0, striker: false, active: true },
                { name: "WILLIAMSON", runs: 0, balls: 0, active: false },
                { name: "POLLARD", runs: 0, balls: 0, active: false },
                { name: "RUSSELL", runs: 0, balls: 0, active: false },
                { name: "NARINE", runs: 0, balls: 0, active: false },
                { name: "CUMMINS", runs: 0, balls: 0, active: false },
                { name: "STARC", runs: 0, balls: 0, active: false },
                { name: "ZAMPA", runs: 0, balls: 0, active: false },
                { name: "LYNN", runs: 0, balls: 0, active: false }
            ],
            bowler: { name: "SHAMI", overs: 0, balls: 0, runs: 0, wickets: 0 }
        };

        let currentInning = 1;
        let timerSeconds = 0, timerInterval = null;

        // Helper functions
        function getStriker(inning) { return inning.batsmen.find(b => b.striker && b.active) || inning.batsmen[0]; }
        function getNonStriker(inning) { return inning.batsmen.find(b => !b.striker && b.active) || inning.batsmen[1]; }

        function calculateRunRate(inning) {
            let total = inning.overs * 6 + inning.balls;
            return total > 0 ? (inning.runs / total * 6).toFixed(2) : '0.00';
        }

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
            document.getElementById(pageId).classList.add('active-page');
            document.querySelectorAll('.nav-link').forEach(b => b.classList.remove('active'));
            if (pageId === 'page1') document.getElementById('navSetup').classList.add('active');
            if (pageId === 'page2') { document.getElementById('navInning1').classList.add('active'); updateInning1UI(); }
            if (pageId === 'page3') { document.getElementById('navInning2').classList.add('active'); updateInning2UI(); }
            if (pageId === 'page4') { document.getElementById('navStats').classList.add('active'); updateFinalStats(); }
        }

        // Update Inning 1 UI
        function updateInning1UI() {
            let i = inning1;
            document.getElementById('i1TeamName').innerText = config.team1;
            document.getElementById('i1OversInfo').innerText = config.totalOvers + ' overs';
            document.getElementById('i1Runs').innerText = i.runs;
            document.getElementById('i1Wickets').innerText = '/' + i.wickets;
            document.getElementById('i1Overs').innerText = i.overs + '.' + i.balls;
            document.getElementById('i1RunRate').innerText = calculateRunRate(i);
            document.getElementById('i1Proj').innerText = (calculateRunRate(i) * config.totalOvers).toFixed(0);
            let part = (getStriker(i)?.runs + getNonStriker(i)?.runs) || 0;
            document.getElementById('i1Part').innerText = part;

            let s = getStriker(i), ns = getNonStriker(i);
            document.getElementById('i1Batsmen').innerHTML = `
                <div class="batsman-card">
                    <input class="i1-s" value="${s?.name || ''}">
                    <div class="batsman-digits">
                        <span>${s?.runs||0}</span>
                        <span>${s?.balls||0} B</span>
                        <span>${((s?.runs||0)/(s?.balls||1)*100).toFixed(1)} SR</span>
                    </div>
                </div>
                <div class="batsman-card">
                    <input class="i1-ns" value="${ns?.name || ''}">
                    <div class="batsman-digits">
                        <span>${ns?.runs||0}</span>
                        <span>${ns?.balls||0} B</span>
                        <span>${((ns?.runs||0)/(ns?.balls||1)*100).toFixed(1)} SR</span>
                    </div>
                </div>
            `;
            document.querySelector('.i1-s')?.addEventListener('input', (e) => { if(s) s.name = e.target.value.toUpperCase(); updateInning1UI(); });
            document.querySelector('.i1-ns')?.addEventListener('input', (e) => { if(ns) ns.name = e.target.value.toUpperCase(); updateInning1UI(); });

            document.getElementById('i1BowlerName').value = i.bowler.name;
            document.getElementById('i1BowlerFig').innerText = `${i.bowler.overs}.${i.bowler.balls}-${i.bowler.runs}-${i.bowler.wickets}`;
            let econ = (i.bowler.overs*6+i.bowler.balls) ? (i.bowler.runs/(i.bowler.overs*6+i.bowler.balls)*6).toFixed(2) : '0.00';
            document.getElementById('i1BowlerEcon').innerText = `econ ${econ}`;
        }

        // Update Inning 2 UI
        function updateInning2UI() {
            let i = inning2;
            document.getElementById('i2TeamName').innerText = config.team2;
            let target = inning1.runs + 1;
            document.getElementById('targetDisplay').innerText = `TARGET: ${target}`;
            document.getElementById('i2Runs').innerText = i.runs;
            document.getElementById('i2Wickets').innerText = '/' + i.wickets;
            document.getElementById('i2Overs').innerText = i.overs + '.' + i.balls;
            document.getElementById('i2RunRate').innerText = calculateRunRate(i);
            let remBalls = config.totalOvers*6 - (i.overs*6 + i.balls);
            let need = target - i.runs;
            document.getElementById('i2ReqRate').innerText = (remBalls>0 && need>0) ? (need/remBalls*6).toFixed(2) : '‚Äî';
            let part = (getStriker(i)?.runs + getNonStriker(i)?.runs) || 0;
            document.getElementById('i2Part').innerText = part;

            let s = getStriker(i), ns = getNonStriker(i);
            document.getElementById('i2Batsmen').innerHTML = `
                <div class="batsman-card">
                    <input class="i2-s" value="${s?.name || ''}">
                    <div class="batsman-digits">
                        <span>${s?.runs||0}</span>
                        <span>${s?.balls||0} B</span>
                        <span>${((s?.runs||0)/(s?.balls||1)*100).toFixed(1)} SR</span>
                    </div>
                </div>
                <div class="batsman-card">
                    <input class="i2-ns" value="${ns?.name || ''}">
                    <div class="batsman-digits">
                        <span>${ns?.runs||0}</span>
                        <span>${ns?.balls||0} B</span>
                        <span>${((ns?.runs||0)/(ns?.balls||1)*100).toFixed(1)} SR</span>
                    </div>
                </div>
            `;
            document.querySelector('.i2-s')?.addEventListener('input', (e) => { if(s) s.name = e.target.value.toUpperCase(); updateInning2UI(); });
            document.querySelector('.i2-ns')?.addEventListener('input', (e) => { if(ns) ns.name = e.target.value.toUpperCase(); updateInning2UI(); });

            document.getElementById('i2BowlerName').value = i.bowler.name;
            document.getElementById('i2BowlerFig').innerText = `${i.bowler.overs}.${i.bowler.balls}-${i.bowler.runs}-${i.bowler.wickets}`;
            let econ = (i.bowler.overs*6+i.bowler.balls) ? (i.bowler.runs/(i.bowler.overs*6+i.bowler.balls)*6).toFixed(2) : '0.00';
            document.getElementById('i2BowlerEcon').innerText = `econ ${econ}`;
        }

        // FINAL STATS - FULL PLAYER DATA FOR BOTH TEAMS
        function updateFinalStats() {
            document.getElementById('finalOvers').innerText = config.totalOvers;
            document.getElementById('team1NameFinal').innerText = config.team1;
            document.getElementById('team2NameFinal').innerText = config.team2;

            // Team 1 Batting - ALL PLAYERS with runs
            let t1Bat = '';
            inning1.batsmen.forEach(b => {
                if (b.runs > 0 || b.balls > 0) {
                    t1Bat += `<div class="player-stat-line"><span>${b.name}</span><span>${b.runs} (${b.balls}) SR ${((b.runs/(b.balls||1))*100).toFixed(1)}</span></div>`;
                } else {
                    t1Bat += `<div class="player-stat-line"><span>${b.name}</span><span>0 (0)</span></div>`;
                }
            });
            document.getElementById('team1BattingStats').innerHTML = t1Bat;

            // Team 1 Bowling - show bowler stats
            let b1 = inning1.bowler;
            document.getElementById('team1BowlingStats').innerHTML = `
                <div class="player-stat-line"><span>${b1.name}</span><span>${b1.overs}.${b1.balls} - ${b1.runs} - ${b1.wickets} (econ ${((b1.runs/(b1.overs*6+b1.balls||1))*6).toFixed(2)})</span></div>
            `;

            // Team 2 Batting
            let t2Bat = '';
            inning2.batsmen.forEach(b => {
                if (b.runs > 0 || b.balls > 0) {
                    t2Bat += `<div class="player-stat-line"><span>${b.name}</span><span>${b.runs} (${b.balls}) SR ${((b.runs/(b.balls||1))*100).toFixed(1)}</span></div>`;
                } else {
                    t2Bat += `<div class="player-stat-line"><span>${b.name}</span><span>0 (0)</span></div>`;
                }
            });
            document.getElementById('team2BattingStats').innerHTML = t2Bat;

            // Team 2 Bowling
            let b2 = inning2.bowler;
            document.getElementById('team2BowlingStats').innerHTML = `
                <div class="player-stat-line"><span>${b2.name}</span><span>${b2.overs}.${b2.balls} - ${b2.runs} - ${b2.wickets} (econ ${((b2.runs/(b2.overs*6+b2.balls||1))*6).toFixed(2)})</span></div>
            `;

            // Partnerships
            let part1 = (inning1.batsmen[0]?.runs + inning1.batsmen[1]?.runs) || 0;
            let part2 = (inning2.batsmen[0]?.runs + inning2.batsmen[1]?.runs) || 0;
            document.getElementById('team1Partnership').innerHTML = `${part1} runs (top order)`;
            document.getElementById('team2Partnership').innerHTML = `${part2} runs (top order)`;

            // Result
            let result = '';
            if (inning2.runs > inning1.runs) result = `${config.team2} WON by ${10 - inning2.wickets} wickets`;
            else if (inning2.runs < inning1.runs) result = `${config.team1} WON by ${inning1.runs - inning2.runs} runs`;
            else result = 'MATCH TIED';
            document.getElementById('resultMessage').innerText = result;
            document.getElementById('winnerText').innerText = result;
        }

        // Add run function
        function addRun(inning, run, isWide, isNoBall) {
            let striker = getStriker(inning);
            if (run === 'W') {
                inning.wickets++;
                if (striker) striker.active = false;
                let next = inning.batsmen.find(b => !b.active);
                if (next) next.active = true;
                inning.bowler.wickets++;
                inning.balls++; inning.bowler.balls++;
            } else {
                let r = parseInt(run);
                if (!isNaN(r)) {
                    inning.runs += r;
                    if (striker) { striker.runs += r; striker.balls++; }
                    inning.bowler.runs += r;
                    inning.balls++; inning.bowler.balls++;
                }
            }
            if (isWide) { inning.runs += 1; }
            if (isNoBall) { inning.runs += 1; }

            if (inning.balls >= 6) {
                inning.overs++;
                inning.balls = 0;
                inning.bowler.overs++;
                inning.bowler.balls = 0;
            }
            if (currentInning === 1) updateInning1UI();
            else updateInning2UI();
        }

        // Event Listeners
        document.querySelectorAll('.nav-link').forEach(btn => {
            btn.addEventListener('click', (e) => showPage(e.target.getAttribute('data-page')));
        });

        // Over selection
        let selectedOvers = 20;
        document.querySelectorAll('.over-option').forEach(card => {
            card.addEventListener('click', () => {
                document.querySelectorAll('.over-option').forEach(c => c.classList.remove('selected'));
                card.classList.add('selected');
                selectedOvers = parseInt(card.getAttribute('data-overs'));
            });
        });

        document.getElementById('startMatchBtn').addEventListener('click', () => {
            config.totalOvers = selectedOvers;
            config.team1 = document.getElementById('team1Input').value.toUpperCase();
            config.team2 = document.getElementById('team2Input').value.toUpperCase();
            // Reset innings
            inning1 = JSON.parse(JSON.stringify(inning1));
            inning1.runs=0; inning1.wickets=0; inning1.overs=0; inning1.balls=0;
            inning1.bowler = { name: "BOULT", overs:0, balls:0, runs:0, wickets:0 };
            inning1.batsmen.forEach((b,i) => { b.runs=0; b.balls=0; b.active = i<2; b.striker = i===0; });
            inning2 = JSON.parse(JSON.stringify(inning2));
            inning2.runs=0; inning2.wickets=0; inning2.overs=0; inning2.balls=0;
            inning2.bowler = { name: "SHAMI", overs:0, balls:0, runs:0, wickets:0 };
            inning2.batsmen.forEach((b,i) => { b.runs=0; b.balls=0; b.active = i<2; b.striker = i===0; });
            currentInning = 1;
            showPage('page2');
        });

        // Run buttons
        document.querySelectorAll('#page2 .run1').forEach(btn => {
            btn.addEventListener('click', (e) => {
                let r = e.target.getAttribute('data-run');
                if (r === 'WD') addRun(inning1, '1', true);
                else if (r === 'NB') addRun(inning1, '1', false, true);
                else addRun(inning1, r);
            });
        });
        document.querySelectorAll('#page3 .run2').forEach(btn => {
            btn.addEventListener('click', (e) => {
                let r = e.target.getAttribute('data-run');
                if (r === 'WD') addRun(inning2, '1', true);
                else if (r === 'NB') addRun(inning2, '1', false, true);
                else addRun(inning2, r);
            });
        });

        document.getElementById('i1ChangeStrike').addEventListener('click', () => {
            let s = getStriker(inning1), ns = getNonStriker(inning1);
            if (s && ns) { s.striker = false; ns.striker = true; updateInning1UI(); }
        });
        document.getElementById('i2ChangeStrike').addEventListener('click', () => {
            let s = getStriker(inning2), ns = getNonStriker(inning2);
            if (s && ns) { s.striker = false; ns.striker = true; updateInning2UI(); }
        });

        document.getElementById('endInning1Btn').addEventListener('click', () => {
            currentInning = 2;
            showPage('page3');
        });

        document.getElementById('endMatchBtn').addEventListener('click', () => {
            showPage('page4');
        });

        document.getElementById('newMatchBtn').addEventListener('click', () => {
            showPage('page1');
        });

        document.getElementById('downloadStatsBtn').addEventListener('click', () => {
            let data = JSON.stringify({config, inning1, inning2}, null, 2);
            let blob = new Blob([data], {type: 'application/json'});
            let a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'full_match_stats.json';
            a.click();
        });

        // Timer
        function startTimer() {
            if (timerInterval) return;
            timerInterval = setInterval(() => {
                timerSeconds++;
                let m = Math.floor(timerSeconds/60);
                let s = timerSeconds%60;
                document.getElementById('globalTimer').innerText = `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
            },1000);
        }
        document.getElementById('timerStart').addEventListener('click', startTimer);
        document.getElementById('timerPause').addEventListener('click', () => { clearInterval(timerInterval); timerInterval = null; });

        updateInning1UI();
    })();
</script>
</body>
</html>
